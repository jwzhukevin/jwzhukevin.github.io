<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>WannierTools 安装 | 诸葛凯文</title><meta name=keywords content=","><meta name=description content="WannierTools 是一款专注于拓扑材料研究的开源软件，适用于计算材料的电子结构和拓扑性质。"><meta name=author content="jwzhukevin"><link rel=canonical href=https://jwzhukevin.github.io/en/posts/tools/wanniertools-%E5%AE%89%E8%A3%85/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://jwzhukevin.github.io/img/logo.webp><link rel=icon type=image/png sizes=16x16 href=https://jwzhukevin.github.io/img/logo.webp><link rel=icon type=image/png sizes=32x32 href=https://jwzhukevin.github.io/img/logo.webp><link rel=apple-touch-icon href=https://jwzhukevin.github.io/img/logo.webp><link rel=mask-icon href=https://jwzhukevin.github.io/img/logo.webp><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://jwzhukevin.github.io/en/posts/tools/wanniertools-%E5%AE%89%E8%A3%85/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=preload href=/css/font-awesome.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/css/font-awesome.min.css></noscript><script>typeof jQuery=="undefined"&&document.write('<script src="/js/jquery.min.js"><\/script>')</script><script>document.addEventListener("DOMContentLoaded",function(){if(document.querySelector(".mermaid, .language-mermaid")){const e=document.createElement("script");e.src="/js/mermaid.min.js",e.defer=!0,document.head.appendChild(e)}})</script><script>(function(){const e=document.createElement("script");e.src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.onerror=function(){const e=document.createElement("script");e.src="/js/busuanzi.min.js",document.head.appendChild(e)},document.head.appendChild(e)})()</script><script defer src=/js/resource-optimizer.js></script><script defer src=/js/space-bg.js></script><script>(function(){const e=new Image;e.onload=e.onerror=function(){document.documentElement.classList.add(e.height===2?"webp":"no-webp")},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"})()</script><noscript><style>.no-js-hidden{display:none !important}.no-js-show{display:block !important}#visitor-info{background:rgba(240,248,255,.8);border:1px solid #e1e8ed;border-radius:8px;padding:16px;margin:16px 0;text-align:center;color:#333}@media(prefers-color-scheme:dark){#visitor-info{background:rgba(40,44,52,.8);border-color:#444;color:#e8e8e8}}#busuanzi_container_page_pv,#busuanzi_container_site_uv{display:inline !important}img[loading=lazy]{opacity:1 !important}</style><script>document.write('<div id="visitor-info" class="no-js-show">'),document.write('<div style="font-size:20px;font-weight:bold;margin-bottom:12px;">👋 欢迎访问！</div>'),document.write("<div>感谢您的到来，祝您浏览愉快！</div>"),document.write('<div style="margin-top:8px;font-size:14px;color:#888;">'),document.write("💡 启用JavaScript可获得更好的浏览体验"),document.write("</div>"),document.write("</div>")</script></noscript><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?YOUR_BAIDU_ANALYTICS_ID",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.css integrity=sha384-bYdxxUwYipFNohQlHt0bjN/LCpueqWz13HufFEV1SUatKs1cm4L6fFgCi1jT643X crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.js integrity=sha384-Qsn9KnoKISj6dI8g7p1HBlNpVx0I8p1SvlwOldgi3IorMle61nQy4zEahWYtljaz crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-B7QEZPJTVF"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-B7QEZPJTVF")}</script><meta property="og:title" content="WannierTools 安装"><meta property="og:description" content="WannierTools 是一款专注于拓扑材料研究的开源软件，适用于计算材料的电子结构和拓扑性质。"><meta property="og:type" content="article"><meta property="og:url" content="https://jwzhukevin.github.io/en/posts/tools/wanniertools-%E5%AE%89%E8%A3%85/"><meta property="og:image" content="https://jwzhukevin.github.io/img/WannierTools.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-11-27T20:12:14+08:00"><meta property="article:modified_time" content="2024-11-27T20:12:14+08:00"><meta property="og:see_also" content="https://jwzhukevin.github.io/en/posts/tools/fplo-software-beginner-tutorial/"><meta property="og:see_also" content="https://jwzhukevin.github.io/en/posts/code_knowledge/github-2fa%E7%AE%80%E5%8D%95%E6%95%99%E7%A8%8B/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://jwzhukevin.github.io/img/WannierTools.png"><meta name=twitter:title content="WannierTools 安装"><meta name=twitter:description content="WannierTools 是一款专注于拓扑材料研究的开源软件，适用于计算材料的电子结构和拓扑性质。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"📚 行万里路","item":"https://jwzhukevin.github.io/en/posts/"},{"@type":"ListItem","position":2,"name":"Tools","item":"https://jwzhukevin.github.io/en/posts/tools/"},{"@type":"ListItem","position":3,"name":"WannierTools 安装","item":"https://jwzhukevin.github.io/en/posts/tools/wanniertools-%E5%AE%89%E8%A3%85/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"WannierTools 安装","name":"WannierTools 安装","description":"WannierTools 是一款专注于拓扑材料研究的开源软件，适用于计算材料的电子结构和拓扑性质。\n","keywords":["",""],"articleBody":"WannierTools 是一款专注于拓扑材料研究的开源软件，适用于计算材料的电子结构和拓扑性质。\n以强拓扑绝缘体 Bi2Se3 为例，在研究它的性质时，通常需要使用 VASP 进行 DFT 计算，之后就需要使用 wannier90 进行紧束缚的计算，最后就需要使用 WannierTools 对其拓扑性质进行分析，比如拓扑数、表面态和表面自旋。\n所以需要知道 WannierTools 这个工具的安装是必要的步骤。\n这里默认是在 LInux 系统下进行操作，没办法我目前是 Ubuntu 系统，其他的平台和系统我目前还不了解。\n环境安装 WannierTools 的很多计算需要特定的加速才比较优秀，环境安装是比较重要的一步，这里引用官方文档，在 Installation of WannierTools (Linux or Mac)中，需要准备好的库有：\n“Installation” You need to install the following (mandatory) packages:\nFortran compiler (Gfortran or ifort)\nMPICH version higher than 2.1.5\nLapack and Blas library, (Intel MKL recommended)\nArpack-ng\n当然，随着时间的推移（现在是2024年），其中的需要安装的库或者依赖都会变化。\nFortran compiler 你需要知道你现在是否安装了 Fortran compiler\n检查 检查Gfortran或ifort：- 在终端中运行以下命令：\n1 gfortran --version 或者\n1 ifort -v 如果系统返回版本信息，则表示已安装相应的Fortran编译器。如果没有返回信息，您需要安装Gfortran或Intel Fortran编译器。\n安装 Ubuntu/Debian 系统\n在终端输入\n1 2 3 sudo apt update sudo apt install gfortran gfortran --version 如需要安装特定的版本（例如gfortran-10）\n1 2 3 sudo add-apt-repository ppa:ubuntu-toolchain-r/test sudo apt update sudo apt install gfortran-10 MPICH 检查 在终端中运行以下命令：\n1 2 mpiexec --version mpichversion 如果系统返回版本信息，则表示已安装\n安装 Ubuntu/Debian 系统\n准备环境\n1 2 sudo apt update sudo apt install build-essential 访问 MPICH 的官方网站，下载最新版本的源代码包，如果可以使用 wget 安装，就输入\n1 wget http://www.mpich.org/static/downloads/4.3.0/mpich-4.3.0.tar.gz 注意，你需要知道现在最新的版本是哪个，或者你需要哪个版本，4.3.0只是目前写博客时的最新版本。\n之后进行解压：\n1 2 tar -xzvf mpich-4.3.0.tar.gz cd mpich-4.3.0 配置安装目录，编译和安装：\n1 2 ./configure --prefix=/usr/local/mpich-4.3.0\\ make \u0026\u0026 sudo make install 一段时间后，需要你耐心等待，之后就需要设置环境变量\n1 2 echo 'export PATH=/usr/local/mpich-4.3.0/bin:$PATH' \u003e\u003e ~/.bashrc source ~/.bashrc 注意，如果你的路径不一样，你就需要修改 /usr/local/ 为你的安装路径。\n最后，你也可以运行一些示例程序来测试MPICH是否正常工作。进入示例目录并运行测试程序：\n1 2 cd examples mpiexec -n 4 ./cpi # 假设cpi是一个示例程序 Intel MKL 这里介绍安装 Intel MKL 是因为他功能更加全面，如果安装过 VASP，过程中就会安装 Intel 的编译环境，对 MKL 应该也不陌生。这个安装就跳过，如果之后没有再添加就说明我比较懒。\nArpack 这个库适用于求解大规模特征值，在计算矩阵时很有用。\nWannierTools 安装 终于到了本体的安装，这一部分安装对于前面来说就比较容易了。\n先看官方安装包里面的文档：\n“Installation” WannierTools is written in Fortran90. Eventually, Fortran compiler is required to install it. At present, we only support the installation on Mac or Linux or other Unix like systems.\nDownload the package a. You can download the latest develop branch by using “git clone” git clone https://github.com/quanshengwu/wannier_tools.git b. You could also download the release version on page https://github.com/quanshengwu/wannier_tools/releases\nAfter the download, uncompress it if necessary. The source file is included in the src/ folder. The executable binary will be copied to bin/ folder after compilation. There are several examples in the examples/ folder. The symmetrization module is in the wannhr_symm/ folder which is an independent python package.\nGo into the folder src/ for the compilation. We prepared several Makefiles for different usage. Please copy the one that you need into Makefile like\ncp Makefile.intel-mpi Makefile\nModify Makefile a. Choose the lapack and Blas library by setting LIBS. b. if you want to use mpi, please add -DMPI as an option of compiler F90.\nMake it by typing\nmake\nAfter the compilation, binary wt.x will be generated and copied to ../bin/ folder.\nAbout the usage, please visit website www.wanniertools.com\n对，几乎很详细地教会你怎么安装，就怕你哪一步不懂。\n按照官方教程来，几乎不会出错，唯一需要注意的是2024年有一个编译器的弃用。Intel Fortran Compiler Classic（ifort）已被弃用，并将在2024年底停止支持。Intel建议用户尽早迁移到基于LLVM的新编译器（ifx），以获得持续的支持和新功能。这意味着在未来的版本中，ifort将不再可用。\n所以你就需要在 Makefile 里面将 ifort 改为 ifx 以避免之后的出错。\n估计这在之后 WannierTools 会自动更新这个修复，到那时候那就当我没讲了。\n","wordCount":"1392","inLanguage":"en","image":"https://jwzhukevin.github.io/img/WannierTools.png","datePublished":"2024-11-27T20:12:14+08:00","dateModified":"2024-11-27T20:12:14+08:00","author":[{"@type":"Person","name":"jwzhukevin"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://jwzhukevin.github.io/en/posts/tools/wanniertools-%E5%AE%89%E8%A3%85/"},"publisher":{"@type":"Organization","name":"诸葛凯文","logo":{"@type":"ImageObject","url":"https://jwzhukevin.github.io/img/logo.webp"}}}</script></head><body id=top><script>(function(){let e,t=new RegExp("(^| )change-themes=([^;]*)(;|$)");(e=document.cookie.match(t))||((new Date).getHours()>=19||(new Date).getHours()<6?(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark")):(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")))})(),localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://jwzhukevin.github.io/en/ accesskey=h title="诸葛凯文 (Alt + H)"><img src=https://jwzhukevin.github.io/img/logo.webp alt=logo aria-label=logo height=32>诸葛凯文</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)">
<svg id="moon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://jwzhukevin.github.io/en/news title="🌍 士林清议"><span>🌍 士林清议</span></a></li><li><a href=https://jwzhukevin.github.io/en/search/ title="🔍 寻寻觅觅 (Alt + /)" accesskey=/><span>🔍 寻寻觅觅</span></a></li><li><a href=https://jwzhukevin.github.io/en/posts title="✈️ 读万卷书"><span>✈️ 读万卷书</span></a></li><li><a href=https://jwzhukevin.github.io/en/archives/ title="🌌 一江春水"><span>🌌 一江春水</span></a></li><li><a href=https://jwzhukevin.github.io/en/about title="👤 一介布衣"><span>👤 一介布衣</span></a></li><li><a href=https://jwzhukevin.github.io/en/friends title="🏰 西出阳关"><span>🏰 西出阳关</span></a></li><li><a href=https://jwzhukevin.github.io/en/collection title="🌠 偷得浮生"><span>🌠 偷得浮生</span></a></li></ul></nav></header><main class="main page"><style>i[id*=post_meta_style]{display:flex;align-items:center;margin:0 0 10px}</style><article class=post-single><div id=single-content><header class=post-header><div class=breadcrumbs><a href=https://jwzhukevin.github.io/en/>🏠 主页</a>&nbsp;»&nbsp;<a href=https://jwzhukevin.github.io/en/posts/>📚 行万里路</a>&nbsp;»&nbsp;<a href=https://jwzhukevin.github.io/en/posts/tools/>Tools</a></div><h1 class=post-title>WannierTools 安装</h1><div class=post-meta><style>i[id*=post_meta_style]{display:flex;align-items:center;margin:0 0 10px}.parent-post-meta{display:flex;flex-wrap:wrap;opacity:.8}</style><span class=parent-post-meta><span id=post_meta_style_1><span class="fa fa-calendar-check-o"></span>
<span>2024-11-27
&nbsp;&nbsp;
</span></span><span id=post_meta_style_3><span class="fa fa-file-word-o"></span>
<span>1392 words
&nbsp;&nbsp;
</span></span><span id=post_meta_style_4><span class="fa fa-clock-o"></span>
<span>3 min
&nbsp;&nbsp;
</span></span><span id=post_meta_style_6><span class="fa fa-tags" style=opacity:.8></span>
<span><span class=post-tags-meta><a href=https://jwzhukevin.github.io/en/tags/wanniertools/ style="color:var(--secondary) !important">WannierTools</a>
&nbsp;<a href=https://jwzhukevin.github.io/en/tags/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/ style="color:var(--secondary) !important">软件安装</a>
&nbsp;<a href=https://jwzhukevin.github.io/en/tags/tools/ style="color:var(--secondary) !important">Tools</a>
</span></span></span></span><span style=opacity:.8><span id=post_meta_style_7>&nbsp;&nbsp;
<span class="fa fa-eye"></span>
<span><span id=busuanzi_container_page_pv><span id=busuanzi_value_page_pv></span></span>
&nbsp;&nbsp;
</span></span><span id=post_meta_style_8><span class="fa fa-commenting-o"></span>
<span><script src=https://cdn.staticfile.org/twikoo//twikoo.all.min.js></script><script>let url=document.documentURI,dnsUrl="https://jwzhukevin.github.io/",urlSplit=url.split(dnsUrl),finalUrl=urlSplit[1];finalUrl&&finalUrl[0]!=="/"&&(finalUrl="/"+finalUrl),twikoo.getCommentsCount({envId:"",region:"",urls:[finalUrl],includeReply:!1}).then(function(e){let t=e[0].count;const n=document.getElementById("comment_count");n.innerText=t}).catch(function(e){console.error(e)})</script><span id=comment_count></span></span></span></span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>文章目录</span></summary><div class=inner><ul><li><a href=#%e7%8e%af%e5%a2%83%e5%ae%89%e8%a3%85 aria-label=环境安装>环境安装</a><ul><li><a href=#fortran-compiler aria-label="Fortran compiler">Fortran compiler</a><ul><li><a href=#%e6%a3%80%e6%9f%a5 aria-label=检查>检查</a></li><li><a href=#%e5%ae%89%e8%a3%85 aria-label=安装>安装</a></li></ul></li><li><a href=#mpich aria-label=MPICH>MPICH</a><ul><li><a href=#%e6%a3%80%e6%9f%a5-1 aria-label=检查>检查</a></li><li><a href=#%e5%ae%89%e8%a3%85-1 aria-label=安装>安装</a></li></ul></li><li><a href=#intel-mkl aria-label="Intel MKL">Intel MKL</a></li><li><a href=#arpack aria-label=Arpack>Arpack</a></li></ul></li><li><a href=#wanniertools-%e5%ae%89%e8%a3%85 aria-label="WannierTools 安装">WannierTools 安装</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>WannierTools 是一款专注于拓扑材料研究的开源软件，适用于计算材料的电子结构和拓扑性质。</p><p>以强拓扑绝缘体 Bi2Se3 为例，在研究它的性质时，通常需要使用 VASP 进行 DFT 计算，之后就需要使用 wannier90 进行紧束缚的计算，最后就需要使用 WannierTools 对其拓扑性质进行分析，比如拓扑数、表面态和表面自旋。</p><p>所以需要知道 WannierTools 这个工具的安装是必要的步骤。</p><p>这里默认是在 LInux 系统下进行操作，没办法我目前是 Ubuntu 系统，其他的平台和系统我目前还不了解。</p><h3 id=环境安装>环境安装<a hidden class=anchor aria-hidden=true href=#环境安装>#</a></h3><p>WannierTools 的很多计算需要特定的加速才比较优秀，环境安装是比较重要的一步，这里引用<a href=http://www.wanniertools.com/ target=_blank rel="noopener nofollow noreferrer">官方文档</a>，在 <a href=[http://www.wanniertools.com/installation.html>Installation of WannierTools (Linux or Mac)</a>中，需要准备好的库有：</p><div class="details admonition quote open"><div class="details-summary admonition-title"><i class="icon fas fa-quote-right fa-fw"></i>“Installation”<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content><p>You need to install the following (mandatory) packages:</p><ul><li><p>Fortran compiler (Gfortran or ifort)</p></li><li><p>MPICH version higher than 2.1.5</p></li><li><p>Lapack and Blas library, (Intel MKL recommended)</p></li><li><p>Arpack-ng</p></li></ul></div></div></div><p>当然，随着时间的推移（现在是2024年），其中的需要安装的库或者依赖都会变化。</p><h4 id=fortran-compiler>Fortran compiler<a hidden class=anchor aria-hidden=true href=#fortran-compiler>#</a></h4><p>你需要知道你现在是否安装了 Fortran compiler</p><h5 id=检查>检查<a hidden class=anchor aria-hidden=true href=#检查>#</a></h5><p>检查Gfortran或ifort：- 在终端中运行以下命令：</p><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272" id=hl-0-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>gfortran --version
</span></span></code></pre></td></tr></table></div></div><p>或者</p><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272" id=hl-1-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>ifort -v
</span></span></code></pre></td></tr></table></div></div><p>如果系统返回版本信息，则表示已安装相应的Fortran编译器。如果没有返回信息，您需要安装Gfortran或Intel Fortran编译器。</p><h5 id=安装>安装<a hidden class=anchor aria-hidden=true href=#安装>#</a></h5><p>Ubuntu/Debian 系统</p><p>在终端输入</p><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272" id=hl-2-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272" id=hl-2-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272" id=hl-2-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-3>3</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>sudo apt install gfortran
</span></span><span style=display:flex><span>gfortran --version
</span></span></code></pre></td></tr></table></div></div><p>如需要安装特定的版本（例如gfortran-10）</p><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272" id=hl-3-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272" id=hl-3-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272" id=hl-3-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-3>3</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>sudo add-apt-repository ppa:ubuntu-toolchain-r/test
</span></span><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>sudo apt install gfortran-<span style=color:#ff0;font-weight:700>10</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=mpich>MPICH<a hidden class=anchor aria-hidden=true href=#mpich>#</a></h4><h5 id=检查-1>检查<a hidden class=anchor aria-hidden=true href=#检查-1>#</a></h5><p>在终端中运行以下命令：</p><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272" id=hl-4-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272" id=hl-4-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>mpiexec --version
</span></span><span style=display:flex><span>mpichversion
</span></span></code></pre></td></tr></table></div></div><p>如果系统返回版本信息，则表示已安装</p><h5 id=安装-1>安装<a hidden class=anchor aria-hidden=true href=#安装-1>#</a></h5><p>Ubuntu/Debian 系统</p><p>准备环境</p><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272" id=hl-5-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272" id=hl-5-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>sudo apt install build-essential
</span></span></code></pre></td></tr></table></div></div><p>访问 <a href=https://www.mpich.org/ target=_blank rel="noopener nofollow noreferrer">MPICH</a> 的官方网站，下载最新版本的源代码包，如果可以使用 wget 安装，就输入</p><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272" id=hl-6-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>wget http://www.mpich.org/<span style=color:#fff;font-weight:700>static</span>/downloads/<span style=color:#ff0;font-weight:700>4.3</span>.<span style=color:#ff0;font-weight:700>0</span>/mpich-<span style=color:#ff0;font-weight:700>4.3</span>.<span style=color:#ff0;font-weight:700>0.</span>tar.gz
</span></span></code></pre></td></tr></table></div></div><p>注意，你需要知道现在最新的版本是哪个，或者你需要哪个版本，4.3.0只是目前写博客时的最新版本。</p><p>之后进行解压：</p><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272" id=hl-7-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272" id=hl-7-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>tar -xzvf mpich-4.3.0.tar.gz
</span></span><span style=display:flex><span>cd mpich-4.3.0
</span></span></code></pre></td></tr></table></div></div><p>配置安装目录，编译和安装：</p><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272" id=hl-8-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-8-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272" id=hl-8-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-8-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>./configure --prefix=/usr/local/mpich-4.3.0\
</span></span><span style=display:flex><span>make &amp;&amp; sudo make install
</span></span></code></pre></td></tr></table></div></div><p>一段时间后，需要你耐心等待，之后就需要设置环境变量</p><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272" id=hl-9-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-9-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272" id=hl-9-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-9-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>echo <span style=color:#0ff;font-weight:700>&#39;export PATH=/usr/local/mpich-4.3.0/bin:$PATH&#39;</span> &gt;&gt; ~/.bashrc
</span></span><span style=display:flex><span>source ~/.bashrc
</span></span></code></pre></td></tr></table></div></div><p>注意，如果你的路径不一样，你就需要修改 /usr/local/ 为你的安装路径。</p><p>最后，你也可以运行一些示例程序来测试MPICH是否正常工作。进入示例目录并运行测试程序：</p><div class=highlight><div style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272" id=hl-10-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#727272" id=hl-10-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>cd examples
</span></span><span style=display:flex><span>mpiexec -n 4 ./cpi  # 假设cpi是一个示例程序
</span></span></code></pre></td></tr></table></div></div><h4 id=intel-mkl>Intel MKL<a hidden class=anchor aria-hidden=true href=#intel-mkl>#</a></h4><p>这里介绍安装 Intel MKL 是因为他功能更加全面，如果安装过 VASP，过程中就会安装 Intel 的编译环境，对 MKL 应该也不陌生。这个安装就跳过，如果之后没有再添加就说明我比较懒。</p><h4 id=arpack>Arpack<a hidden class=anchor aria-hidden=true href=#arpack>#</a></h4><p>这个库适用于求解大规模特征值，在计算矩阵时很有用。</p><h3 id=wanniertools-安装>WannierTools 安装<a hidden class=anchor aria-hidden=true href=#wanniertools-安装>#</a></h3><p>终于到了本体的安装，这一部分安装对于前面来说就比较容易了。</p><p>先看官方安装包里面的文档：</p><div class="details admonition quote open"><div class="details-summary admonition-title"><i class="icon fas fa-quote-right fa-fw"></i>“Installation”<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content><p>WannierTools is written in Fortran90. Eventually, Fortran compiler is required to install it. At present,
we only support the installation on Mac or Linux or other Unix like systems.</p><ol><li><p>Download the package
a. You can download the latest develop branch by using &ldquo;git clone&rdquo;
git clone <a href=https://github.com/quanshengwu/wannier_tools.git target=_blank rel="noopener nofollow noreferrer">https://github.com/quanshengwu/wannier_tools.git</a>
b. You could also download the release version on page
<a href=https://github.com/quanshengwu/wannier_tools/releases target=_blank rel="noopener nofollow noreferrer">https://github.com/quanshengwu/wannier_tools/releases</a></p></li><li><p>After the download, uncompress it if necessary. The source file is included in the src/ folder.
The executable binary will be copied to bin/ folder after compilation. There are several examples
in the examples/ folder. The symmetrization module is in the wannhr_symm/ folder which is an
independent python package.</p></li><li><p>Go into the folder src/ for the compilation. We prepared several Makefiles for different usage.
Please copy the one that you need into Makefile like</p></li></ol><p>cp Makefile.intel-mpi Makefile</p><ol start=4><li><p>Modify Makefile
a. Choose the lapack and Blas library by setting LIBS.
b. if you want to use mpi, please add -DMPI as an option of compiler F90.</p></li><li><p>Make it by typing</p></li></ol><p>make</p><ol start=6><li><p>After the compilation, binary wt.x will be generated and copied to ../bin/ folder.</p></li><li><p>About the usage, please visit website <a href=https://www.wanniertools.com target=_blank rel="noopener nofollow noreferrer">www.wanniertools.com</a></p></li></ol></div></div></div><p>对，几乎很详细地教会你怎么安装，就怕你哪一步不懂。</p><p>按照官方教程来，几乎不会出错，唯一需要注意的是2024年有一个编译器的弃用。Intel Fortran Compiler Classic（ifort）已被弃用，并将在2024年底停止支持。Intel建议用户尽早迁移到基于LLVM的新编译器（ifx），以获得持续的支持和新功能。这意味着在未来的版本中，ifort将不再可用。</p><p>所以你就需要在 Makefile 里面将 ifort 改为 ifx 以避免之后的出错。</p><p>估计这在之后 WannierTools 会自动更新这个修复，到那时候那就当我没讲了。</p></div><footer class=post-footer><div class=breadcrumbs><a href=https://jwzhukevin.github.io/en/>🏠 主页</a>&nbsp;»&nbsp;<a href=https://jwzhukevin.github.io/en/posts/>📚 行万里路</a>&nbsp;»&nbsp;<a href=https://jwzhukevin.github.io/en/posts/tools/>Tools</a></div><nav class=paginav><a class=prev href=https://jwzhukevin.github.io/en/posts/notes/2024%E7%A7%91%E7%A0%94%E5%B0%8F%E8%AE%B0/><span class=title>« 上一页</span><br><span>2024</span>
</a><a class=next href=https://jwzhukevin.github.io/en/posts/code_knowledge/colorful-icons-for-yaml-file/><span class=title>下一页 »</span><br><span>Colorful icons for YAML file</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share WannierTools 安装 on twitter" href="https://twitter.com/intent/tweet/?text=WannierTools%20%e5%ae%89%e8%a3%85&amp;url=https%3a%2f%2fjwzhukevin.github.io%2fen%2fposts%2ftools%2fwanniertools-%25E5%25AE%2589%25E8%25A3%2585%2f&amp;hashtags=WannierTools%2c%e8%bd%af%e4%bb%b6%e5%ae%89%e8%a3%85%2cTools"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share WannierTools 安装 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fjwzhukevin.github.io%2fen%2fposts%2ftools%2fwanniertools-%25E5%25AE%2589%25E8%25A3%2585%2f&amp;title=WannierTools%20%e5%ae%89%e8%a3%85&amp;summary=WannierTools%20%e5%ae%89%e8%a3%85&amp;source=https%3a%2f%2fjwzhukevin.github.io%2fen%2fposts%2ftools%2fwanniertools-%25E5%25AE%2589%25E8%25A3%2585%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share WannierTools 安装 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fjwzhukevin.github.io%2fen%2fposts%2ftools%2fwanniertools-%25E5%25AE%2589%25E8%25A3%2585%2f&title=WannierTools%20%e5%ae%89%e8%a3%85"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share WannierTools 安装 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fjwzhukevin.github.io%2fen%2fposts%2ftools%2fwanniertools-%25E5%25AE%2589%25E8%25A3%2585%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share WannierTools 安装 on whatsapp" href="https://api.whatsapp.com/send?text=WannierTools%20%e5%ae%89%e8%a3%85%20-%20https%3a%2f%2fjwzhukevin.github.io%2fen%2fposts%2ftools%2fwanniertools-%25E5%25AE%2589%25E8%25A3%2585%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share WannierTools 安装 on telegram" href="https://telegram.me/share/url?text=WannierTools%20%e5%ae%89%e8%a3%85&amp;url=https%3a%2f%2fjwzhukevin.github.io%2fen%2fposts%2ftools%2fwanniertools-%25E5%25AE%2589%25E8%25A3%2585%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></div><style>.comments_details summary{list-style:none;cursor:pointer;margin:50px 0 20px;width:180px;font-size:16px;color:var(--content);display:flex;align-items:center;background-color:var(--primary);color:var(--theme);padding:8px 16px;border-radius:6px;transition:all .3s ease;box-shadow:0 2px 5px rgba(0,0,0,.1)}.comments_details summary:hover{transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.15)}.comments_details summary::-webkit-details-marker{display:none}.comments_details summary::before{content:'';background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='18' height='18' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z'%3E%3C/path%3E%3C/svg%3E");width:18px;height:18px;margin-right:8px;background-repeat:no-repeat}.comments_details[open] summary{margin-bottom:20px;background-color:var(--code-bg);color:var(--content)}.comments_details[open] summary::before{content:'';background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='18' height='18' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='18' y1='6' x2='6' y2='18'%3E%3C/line%3E%3Cline x1='6' y1='6' x2='18' y2='18'%3E%3C/line%3E%3C/svg%3E")}.comments_details summary::after{content:'查看评论';font-weight:500}.comments_details[open] summary::after{content:'关闭评论'}.giscus{margin-top:20px;transition:opacity .3s ease}.comments-container{margin-bottom:30px}</style><div class=comments-container><details class=comments_details><summary></summary><div class=giscus></div></details><script src=https://giscus.app/client.js data-repo=jwzhukevin/jwzhukevin.github.io data-repo-id=R_kgDONSL7SQ data-category=Announcements data-category-id=DIC_kwDONSL7Sc4Cp0FK data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN crossorigin=anonymous async></script></div></article></main><footer class=footer><span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https0://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span><i class="fas fa-bell"></i> 运行 <span id=days>0</span> 天<div class=site-stats><span id=busuanzi_container_site_pv style=display:none><i class="fas fa-eye"></i> 总访问量 <span id=busuanzi_value_site_pv></span> 次
</span><span class=stats-separator>|</span>
<span id=busuanzi_container_site_uv style=display:none><i class="fas fa-users"></i> 访客数 <span id=busuanzi_value_site_uv></span> 人
</span><span class=stats-separator>|</span>
<span id=busuanzi_container_today_pv style=display:none><i class="fas fa-calendar-day"></i> 今日访问 <span id=busuanzi_value_today_pv></span> 次
</span><span class=stats-separator>|</span>
<span id=busuanzi_container_week_pv style=display:none><i class="fas fa-calendar-week"></i> 本周访问 <span id=busuanzi_value_week_pv></span> 次</span></div><span>Copyright
&copy;
2024-2025
<a href=https://jwzhukevin.github.io/en/ style=color:#939393>诸葛凯文</a>
All Rights Reserved
</span><span>26 篇 21719 字</span></footer><a href=https://beian.miit.gov.cn/ target=_blank style=color:#939393></a>&nbsp;
<span><a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=null" style=display:inline-block;text-decoration:none;height:20px;color:#939393><img src style="float:left;margin:0 5px 0 0"></a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><span class=topInner><svg class="topSvg" viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
<span id=read_progress></span>
</span></a><script>document.addEventListener("scroll",function(){const t=document.getElementById("read_progress"),n=document.documentElement.scrollHeight,s=document.documentElement.clientHeight,o=document.documentElement.scrollTop||document.body.scrollTop;t.innerText=((o/(n-s)).toFixed(2)*100).toFixed(0)})</script><script>let detail=document.getElementsByClassName("details");details=[].slice.call(detail);for(let e=0;e<details.length;e++){let t=details[e];const n=t.getElementsByClassName("details-summary")[0];n&&n.addEventListener("click",()=>{t.classList.toggle("open")},!1)}</script><script>var days,number_of_days,s1="2024-11-20",s1=new Date(s1.replace(/-/g,"/"));s2=new Date,days=s2.getTime()-s1.getTime(),number_of_days=parseInt(days/(1e3*60*60*24)),document.getElementById("days").innerHTML=number_of_days,document.getElementById("running days").innerHTML=number_of_days</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>let mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>200||document.documentElement.scrollTop>200?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{(function(){document.cookie="change-themes="+escape("false")})(),document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.body.addEventListener("copy",function(e){if(window.getSelection().toString()&&window.getSelection().toString().length>50){let o=e.clipboardData||window.clipboardData;if(o){e.preventDefault();var s="诸葛凯文",t=window.getSelection().toString(),n=`\r

————————————————\r
版权声明：本文为「`+s+`」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。\r
原文链接：`+location.href;o.setData("text/html",t+n),o.setData("text/plain",t+n)}}})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="📄复制";function i(){t.innerText="👌🏻已复制!",setTimeout(()=>{t.innerText="📄复制"},2e3)}t.addEventListener("click",t=>{var o="诸葛凯文";let a=e.textContent+`\r
————————————————\r
版权声明：本文为「`+o+`」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。\r
原文链接：`+location.href;if("clipboard"in navigator){navigator.clipboard.writeText(a),i();return}const n=document.createRange();n.selectNodeContents(e);const s=window.getSelection();s.removeAllRanges(),s.addRange(n);try{document.execCommand("copy"),i()}catch{}s.removeRange(n)});let l=e.className.replaceAll("language-",""),n=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),c=document.createElement("div"),o=document.createElement("div");o.innerText=l,n.setAttribute("class","mac-tool"),a.setAttribute("class","mac bb1"),r.setAttribute("class","mac bb2"),c.setAttribute("class","mac bb3"),o.setAttribute("class","language-type"),n.appendChild(a),n.appendChild(r),n.appendChild(c),n.appendChild(o),s.classList.contains("highlight")?(s.appendChild(t),s.appendChild(n)):s.parentNode.firstChild==s||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?(e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t),s.appendChild(n)):(e.parentNode.appendChild(t),s.appendChild(n)))})</script><script>$("code[class^=language] ").on("mouseover",function(){this.clientWidth<this.scrollWidth&&($(this).css("width","135%"),$(this).css("border-top-right-radius","var(--radius)"))}).on("mouseout",function(){$(this).css("width","100%"),$(this).css("border-top-right-radius","unset")})</script><link rel=stylesheet href=https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.6.0/lxgwwenkaiscreen.css media=print onload='this.media="all"'><script src=https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js></script><script>pangu.spacingPage()</script><link rel=stylesheet href=/assets/css/extended/space-bg.css><script src=/js/space-bg.js></script></body></html>